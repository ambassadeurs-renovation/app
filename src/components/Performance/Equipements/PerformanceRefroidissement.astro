---
import { Refroidissement } from "dpe-audit";
import { IconEnergieTooltip } from "@component/Performance";

interface Props {
    generateurs: Refroidissement.Generateur.IGenerateur[];
    class?: string;
}

const { generateurs, class: className = "" }: Props = Astro.props;

const tableData = generateurs.map((item) => ({
    description: item.description,
    type: item.type
        ? Refroidissement.Generateur.typeGenerateurToString(item.type)
        : "-",
    energie: item.energie
        ? Refroidissement.Generateur.energieGenerateurToEnum(item.energie)
        : null,
    annee: item.annee_installation ?? "-",
    eer: item.data?.eer ?? null,
}));
---

<div class={className}>
    <table class="table table-element">
        <thead>
            <tr>
                <th>Description</th>
                <th>ENERGIE</th>
                <th>ANNÃ‰E</th>
                <th>EER</th>
            </tr>
        </thead>
        <tbody>
            {
                tableData.map((item) => (
                    <tr>
                        <td>{item.type}</td>
                        <td>
                            {item.energie ? (
                                <IconEnergieTooltip
                                    class="color-primary w-4 h-4"
                                    energie={item.energie}
                                />
                            ) : (
                                "-"
                            )}
                        </td>
                        <td>{item.annee}</td>
                        <td>{item.eer}</td>
                    </tr>
                ))
            }
        </tbody>
    </table>
</div>
